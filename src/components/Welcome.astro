---
import Layout from "../layouts/Layout.astro"; 

import yoImagen from "../assets/yo.png";
import ai from "../assets/ai.png";
import ps from "../assets/ps.png";
import ae from "../assets/ae.png";
import fig from "../assets/fig.png";
import behance from "../assets/behance.png";
import linkedin from "../assets/linkedin.png";
import instagram from "../assets/instagram.png";

import ContactForm from "../components/ContactForm.astro";
---

<Layout title="Inicio | Portafolio Angie">
  <div id="container" class="pt-28 px-6 max-w-7xl mx-auto">
    <main>
      <div id="welcome" class="flex flex-col md:flex-row items-center justify-center gap-12 md:gap-4">
        
        <div class="texto-presentacion w-full md:w-[45%] font-sans text-center md:text-left order-2 md:order-1">
          <h1 class="miTexto text-5xl md:text-7xl font-bold leading-[0.9]">
            Hola, <br />
            <span class="resaltar transition-colors duration-300 hover:text-pink-500 text-[1.2em] font-extrabold">soy Angie!</span>
          </h1>

          <p class="miTexto text-base md:text-lg w-full md:w-[90%] mt-6 mb-7 font-medium text-gray-700">
            Soy una creadora visual de Buenos Aires especializada en dar vida a ideas a través del diseño.
          </p>

          <div class="mb-10">
            <button
              class="open-modal-trigger contact-button-new bg-pink-500 text-white font-semibold py-3 px-8 rounded-full text-lg cursor-pointer transition-all duration-300 ease-in-out hover:bg-pink-600 hover:shadow-lg transform hover:-translate-y-1"
            >
              ¡Trabajemos juntos!
            </button>
          </div>

          <div class="flex space-x-4 justify-center md:justify-start">
            <a href="https://www.linkedin.com/in/ángeles-verón-553b78255" target="_blank">
              <img src={linkedin.src} alt="LinkedIn" width="35" class="hover:scale-110 transition-transform" />
            </a>
            <a href="https://www.behance.net/ngelesvern" target="_blank">
              <img src={behance.src} alt="Behance" width="35" class="hover:scale-110 transition-transform" />
            </a>
            <a href="https://www.instagram.com/" target="_blank">
              <img src={instagram.src} alt="Instagram" width="35" class="hover:scale-110 transition-transform" />
            </a>
          </div>
        </div>

        <div class="imagen-con-pensamientos relative inline-block order-1 md:order-2 mt-8 md:mt-0">
          <img
            id="yoImagen"
            src={yoImagen.src}
            alt="Angie"
            width="350"
            class="z-10 block w-[280px] md:w-[350px] h-auto relative"
          />

          <img class="app-logo absolute w-[50px] md:w-[60px] z-20" id="ai" src={ai.src} alt="Illustrator" />
          <img class="app-logo absolute w-[50px] md:w-[60px] z-20" id="ps" src={ps.src} alt="Photoshop" />
          <img class="app-logo absolute w-[50px] md:w-[60px] z-20" id="ae" src={ae.src} alt="After Effects" />
          <img class="app-logo absolute w-[50px] md:w-[60px] z-20" id="fig" src={fig.src} alt="Figma" />
        </div>

      </div>
    </main>
  </div>

  <div class="marquee-container overflow-hidden w-full h-12 md:h-16 relative bg-pink-500 flex items-center shadow-lg mt-20">
    <div class="marquee-track flex w-max">
      <span class="marquee-text whitespace-nowrap text-white font-semibold text-lg md:text-xl font-sans px-4">
        Contactame &nbsp;•&nbsp; Contactame &nbsp;•&nbsp; Contactame &nbsp;•&nbsp; Contactame &nbsp;•&nbsp; Contactame &nbsp;•&nbsp;
      </span>
      <span class="marquee-text whitespace-nowrap text-white font-semibold text-lg md:text-xl font-sans px-4">
        Contactame &nbsp;•&nbsp; Contactame &nbsp;•&nbsp; Contactame &nbsp;•&nbsp; Contactame &nbsp;•&nbsp; Contactame &nbsp;•&nbsp;
      </span>
      <span class="marquee-text whitespace-nowrap text-white font-semibold text-lg md:text-xl font-sans px-4">
        Contactame &nbsp;•&nbsp; Contactame &nbsp;•&nbsp; Contactame &nbsp;•&nbsp; Contactame &nbsp;•&nbsp; Contactame &nbsp;•&nbsp;
      </span>
    </div>
  </div>

  <div id="contact-modal" class="modal-overlay">
    <div class="modal-content bg-white p-6 md:p-8 rounded-xl shadow-2xl relative">
      <button
        id="close-contact-modal"
        class="modal-close-button absolute top-2 right-3 md:top-4 md:right-6 text-3xl md:text-4xl text-gray-500 hover:text-gray-800 transition leading-none font-light z-50"
        aria-label="Cerrar">&times;</button>
      <ContactForm
        initialSubject="Consulta desde el Inicio"
        projectId="Home_Welcome"
      />
    </div>
  </div>

</Layout>

<style>
  /* RESTAURANDO POSICIONES DE LOGOS */
  .imagen-con-pensamientos {
    position: relative;
    width: max-content;
  }

  #ai { top: -10px; right: 20px; }
  #ps { top: 60px; right: -20px; }
  #ae { top: 90px; left: -10px; }
  #fig { top: 10px; left: 20px; }

  /* ESTILOS DEL MODAL */
  .modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.85);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    visibility: hidden;
    opacity: 0;
    transition: opacity 0.3s, visibility 0.3s;
  }
  .modal-overlay.is-open {
    visibility: visible;
    opacity: 1;
  }
  .modal-content {
    max-width: 650px;
    width: 90%;
    max-height: 90vh;
    overflow-y: auto;
  }

  /* MARQUEE */
  .marquee-track {
    display: flex;
    width: max-content;
  }
</style>

<script>
  import gsap from "gsap";

  document.addEventListener("DOMContentLoaded", () => {
    // 1. ANIMACIÓN MARQUEE
    gsap.to(".marquee-track", {
      x: "-33.33%",
      duration: 15,
      ease: "linear",
      repeat: -1,
    });

    // 2. LÓGICA DEL MODAL
    const openButtons = document.querySelectorAll(".open-modal-trigger");
    const closeButton = document.getElementById("close-contact-modal");
    const modal = document.getElementById("contact-modal");
    const modalContent = document.querySelector(".modal-content") as HTMLElement;

    if (modal && modalContent) {
      const closeModal = () => {
        gsap.to(modalContent, {
          y: -30, opacity: 0, duration: 0.2,
          onComplete: () => {
            modal.classList.remove("is-open");
            document.body.style.overflow = "";
            gsap.set(modalContent, { opacity: 1, y: 0 });
          },
        });
      };

      openButtons.forEach(btn => {
        btn.addEventListener("click", () => {
          modal.classList.add("is-open");
          document.body.style.overflow = "hidden";
          gsap.fromTo(modalContent, { opacity: 0, y: 50 }, { opacity: 1, y: 0, duration: 0.4, ease: "back.out(1.7)" });
        });
      });

      closeButton?.addEventListener("click", closeModal);
      modal.addEventListener("click", (e) => { if (e.target === modal) closeModal(); });
    }

    // 3. LOGOS FLOTANTES (EFECTO HOVER)
    const appLogos = document.querySelectorAll(".app-logo");
    appLogos.forEach((logo) => {
      logo.addEventListener("mouseenter", () => {
        gsap.to(logo, {
          x: gsap.utils.random(-8, 8),
          y: gsap.utils.random(-8, 8),
          rotation: gsap.utils.random(-5, 5),
          scale: 1.1,
          duration: 0.3,
          ease: "power2.out",
        });
      });
      logo.addEventListener("mouseleave", () => {
        gsap.to(logo, { x: 0, y: 0, rotation: 0, scale: 1, duration: 0.3 });
      });
    });
  });
</script>