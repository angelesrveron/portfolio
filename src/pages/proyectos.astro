---
import Layout from '../layouts/Layout.astro'; 
import projects from '../data/projects.json';
import Navbar from "../components/Navbar.astro";
import Footer from "../components/Footer.astro";

---
<head>
  <meta charset="UTF-8">
</head>
<Navbar />
<Layout title="Mis Proyectos | Portafolio">
<section class="projects-grid-container">
 <div class="projects-grid">
{projects.map((project, index) => {
const projectId = String(project.id); 

return (
 <a 
href={`/${projectId}`} 
class="project-card" 
 >
              <div class="card-image-wrapper">
                <img src={project.imageUrl} alt={`Imagen de ${project.title}`} loading="lazy" class="card-image" />
              </div>
              <div class="card-content">
                <h2 class="card-title">{project.title}</h2>
                <span class="card-link-overlay">Ver Detalles →</span>
              </div>
            </a>
          );
      })}
</div>
 </section>
  <Footer />

  <style>
    body{
      margin: 0;
      padding: 0;
      height: auto;
    }
    .projects-page-header {
      text-align: center;
      padding: 4rem 1rem;
      background-color: #f7f7f7;
    }
    .projects-page-header h1 {
      font-size: 3.5rem;
      font-family: 'Poppins', sans-serif;
    }

    .projects-grid-container {
      padding: 3rem 1rem;
      max-width: 1200px;
      margin: 50px auto;
      font-family: 'Poppins', sans-serif;
    }
    .projects-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 40px;
    }

    .project-card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
      overflow: hidden;
      text-decoration: none;
      color: #333;
      display: block;
      
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      
      opacity: 0; 
      transform: translateY(50px) rotateX(10deg);
    }

    .project-card:hover {
      transform: translateY(-5px) scale(1.02); 
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }

    .card-image-wrapper {
        height: 200px;
        overflow: hidden;
    }

    .card-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s ease;
    }

    .project-card:hover .card-image {
        transform: scale(1.05); 
    }

    .card-content {
      padding: 1rem;
      position: relative;
    }

    .card-title {
      font-size: 1.5rem;
      margin: 0;
    }
    
    .card-link-overlay {
        display: block;
        color: #ff5de9; 
        font-weight: 600;
        margin-top: 5px;
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .project-card:hover .card-link-overlay {
        opacity: 1;
    }
  </style>

  <script>
    import { gsap } from "gsap";
    import { ScrollTrigger } from "gsap/ScrollTrigger";

    gsap.registerPlugin(ScrollTrigger);

    document.addEventListener("DOMContentLoaded", () => {
      
      const cards = gsap.utils.toArray(".project-card");

      cards.forEach((card, index) => {
        
        const cardElement = card as Element; 
        
        gsap.to(cardElement, {
          opacity: 1,
          y: 0,
          rotationX: 0,
          duration: 0.8,
          ease: "power3.out",
          
          scrollTrigger: {
            trigger: cardElement,
            start: "top 90%", 
            toggleActions: "play none none none", 
          }
        });
      });
      
    });
</script>
</Layout>